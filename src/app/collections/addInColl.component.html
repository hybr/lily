<section>

  <div class="loading" *ngIf="!(docOfCocs | async)">Loading form...</div>  

  <header data-role="header">
    <h2>Adding New {{(docOfCocs|async)?.name}} Record</h2>
  </header>

  <section data-role="main">
    <form *ngIf="(docOfCocs | async)" [formGroup]="docForm"  (ngSubmit)="onSubmit()" [hidden]="submitted">

      <ul data-role="listview">

        <li>
          <label for="addInCollFieldactiveId">Status:
            <select id="addInCollFieldactiveId" formControlName="active" data-role="slider" required>
              <option value="false">Inactive</option>
              <option value="true" selected=selected>Active</option>
            </select>
          </label>



         <div *ngFor="let field of fields">

         Fields:{{field|json}}

          <li *ngIf="(field['name'] != 'active')" >
            
            <div *ngIf="(field['type'] != 'fields')">
              <label id="addInCollLabel{{field['name'] }}Id" for="addInCollField{{field['name'] }}Id">
                {{field['title']}}: <input 
                type="text" 
                formControlName="{{ field['name'] }}"
                id="addInCollField{{field['name'] }}Id"
                >
              </label>
            </div>

            <div *ngIf="(field['type'] == 'fields')">
              <fieldset>
                <legend>L {{field['title']}}</legend>

                <div *ngFor="let subField of field['fields']">
                {{subField|json}}
                  <label id="addInCollLabel{{subField['name'] }}Id" for="addInCollField{{subField['name'] }}Id">
                    {{subField['title']}}: <input 
                    type="text" 
                    formControlName="{{ subField['name'] }}"
                    id="addInCollField{{subField['name'] }}Id"
                    >
                  </label>
                </div>
              </fieldset>
            </div>
          
          </li>
        </div><!-- let field of fields -->

        <li>
          <button
          type="submit"
          class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-action ui-btn-icon-left"
          >
          Add
          </button>
          <button 
            [routerLink]="['/cocs']" 
            class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-arrow-l ui-btn-icon-left"
          >
            Cancel
          </button>
          <button 
            type="reset" 
            class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-icon-recycle ui-btn-icon-left"
          >
            Reset
          </button>
        </li>
      </ul>
    </form>
  </section>

</section>
