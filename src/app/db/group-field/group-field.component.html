<div  class="lns_sub_fields_border" >

	<div *ngFor="let fieldStructure of getKeysOfRecordStructures()">
	fieldStructure = {{fieldStructure | json}}
	
		<span *ngIf="!(fieldStructure == undefined)">

		<button md-button (click)="removeValue(fieldStructure['_n'])">
			Remove {{fieldStructure['_n']}}
		</button>


		<button md-button (click)="showProperty=!showProperty">Properties</button>

		<fieldset *ngIf="!fieldStructure['_f']">

			<legend>{{fieldStructure['_t']}}</legend>

			<div *ngIf="fieldGroupStructure['_m'] != undefined && fieldGroupStructure['_m'] > 0">

				<div class="lns_sub_fields_border" >
					
					<app-db-group-field	
					[fieldGroupValues]="applyFieldValue(fieldGroupValues, fieldStructure['_n'])"
					[fieldGroupStructure]="fieldStructure"
					(groupFieldValueIsUpdated)="updateFieldGroupValue(fieldStructure['_n'], $event, 'GFC1')"
					(groupFieldStructureIsUpdated)="updateFieldGroupStructure(fieldStructure['_n'], $event, 'GFC2')"
					></app-db-group-field>

				</div>

			</div>

			<div *ngIf="fieldGroupStructure['_m'] == undefined || fieldGroupStructure['_m'] == 0">

				<app-db-group-field	
				[fieldGroupValues]="applyFieldValue(fieldGroupValues, fieldStructure['_n'])"
				[fieldGroupStructure]="fieldStructure"
				(groupFieldValueIsUpdated)="updateFieldGroupValue(fieldStructure['_n'], $event, 'GFC3')"
				(groupFieldStructureIsUpdated)="updateFieldGroupStructure(fieldStructure['_n'], $event, 'GFC4')"
				></app-db-group-field>

			</div>

		</fieldset>

		<div *ngIf="fieldStructure['_f']">

			<div *ngIf="fieldGroupStructure['_m'] != undefined && fieldGroupStructure['_m'] > 0">

				<div class="lns_sub_fields_border" >

					<app-db-field
					[fieldValue]="applyFieldValue(fieldGroupValues, fieldStructure['_n'])"
					[fieldProperties]="fieldStructure"
					(fieldIsUpdated)="updateFieldValue(fieldStructure['_n'], $event, 'GHC5')"
					(fieldPropertiesIsUpdated)="updateFieldProperties(fieldStructure['_n'], $event, 'GFC6')"
					></app-db-field>

				</div>

			</div>

			<div *ngIf="fieldGroupStructure['_m'] == undefined || fieldGroupStructure['_m'] == 0">

				<app-db-field
				[fieldValue]="applyFieldValue(fieldGroupValues, fieldStructure['_n'])"
				[fieldProperties]="fieldStructure" 
				(fieldIsUpdated)="updateFieldValue(fieldStructure['_n'], $event, 'GFC7')"
				(fieldPropertiesIsUpdated)="updateFieldProperties(fieldStructure['_n'], $event, 'GFC8')"
				></app-db-field>

			</div>

		</div>
		
		<app-db-field-property 
			*ngIf="showProperty"
			[fieldProperties]="applyFieldValue(fieldGroupStructure, fieldStructure['_n'])" 
			(fieldPropertiesIsUpdated)="updateFieldProperties(fieldStructure['_n'], $event, 'GFC9')"
		></app-db-field-property>
		
		</span>
	</div>

</div>

<br /><hr />
<span *ngIf="isObjectEmpty(fieldGroupStructure)">
	<button md-button (click)="addNewField(fieldGroupValues, fieldGroupStructure, 1)">Add First Field</button>
</span>
<span *ngIf="!isObjectEmpty(fieldGroupStructure)">
	<button md-button (click)="addNewField(fieldGroupValues, fieldGroupStructure, 0)">Add Next Field</button>
</span>
